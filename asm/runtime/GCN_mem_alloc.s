.include "macros.inc"

.section .text

.global __sys_alloc
__sys_alloc:
/* 803AF884 003AC684  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 803AF888 003AC688  7C 08 02 A6 */	mflr r0
/* 803AF88C 003AC68C  90 01 00 24 */	stw r0, 0x24(r1)
/* 803AF890 003AC690  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 803AF894 003AC694  93 C1 00 18 */	stw r30, 0x18(r1)
/* 803AF898 003AC698  93 A1 00 14 */	stw r29, 0x14(r1)
/* 803AF89C 003AC69C  7C 7D 1B 78 */	mr r29, r3
/* 803AF8A0 003AC6A0  80 0D F8 98 */	lwz r0, __OSCurrHeap@sda21(r13)
/* 803AF8A4 003AC6A4  2C 00 FF FF */	cmpwi r0, -1
/* 803AF8A8 003AC6A8  40 82 00 6C */	bne lbl_803AF914
/* 803AF8AC 003AC6AC  3C 60 80 49 */	lis r3, lbl_8048B6B8@ha
/* 803AF8B0 003AC6B0  38 63 B6 B8 */	addi r3, r3, lbl_8048B6B8@l
/* 803AF8B4 003AC6B4  4C C6 31 82 */	crclr 6
/* 803AF8B8 003AC6B8  48 02 54 31 */	bl _OSReport
/* 803AF8BC 003AC6BC  3C 60 80 49 */	lis r3, lbl_8048B6F0@ha
/* 803AF8C0 003AC6C0  38 63 B6 F0 */	addi r3, r3, lbl_8048B6F0@l
/* 803AF8C4 003AC6C4  4C C6 31 82 */	crclr 6
/* 803AF8C8 003AC6C8  48 02 54 21 */	bl _OSReport
/* 803AF8CC 003AC6CC  48 02 43 21 */	bl OSGetArenaLo
/* 803AF8D0 003AC6D0  7C 7F 1B 78 */	mr r31, r3
/* 803AF8D4 003AC6D4  48 02 43 11 */	bl OSGetArenaHi
/* 803AF8D8 003AC6D8  7C 7E 1B 78 */	mr r30, r3
/* 803AF8DC 003AC6DC  7F E3 FB 78 */	mr r3, r31
/* 803AF8E0 003AC6E0  38 A0 00 01 */	li r5, 1
/* 803AF8E4 003AC6E4  7F C4 F3 78 */	mr r4, r30
/* 803AF8E8 003AC6E8  48 02 3E AD */	bl OSInitAlloc
/* 803AF8EC 003AC6EC  7C 7F 1B 78 */	mr r31, r3
/* 803AF8F0 003AC6F0  48 02 43 0D */	bl OSSetArenaLo
/* 803AF8F4 003AC6F4  38 1F 00 1F */	addi r0, r31, 0x1f
/* 803AF8F8 003AC6F8  57 DE 00 34 */	rlwinm r30, r30, 0, 0, 0x1a
/* 803AF8FC 003AC6FC  54 03 00 34 */	rlwinm r3, r0, 0, 0, 0x1a
/* 803AF900 003AC700  7F C4 F3 78 */	mr r4, r30
/* 803AF904 003AC704  48 02 3F 01 */	bl OSCreateHeap
/* 803AF908 003AC708  48 02 3E 7D */	bl OSSetCurrentHeap
/* 803AF90C 003AC70C  7F C3 F3 78 */	mr r3, r30
/* 803AF910 003AC710  48 02 42 ED */	bl OSSetArenaLo
lbl_803AF914:
/* 803AF914 003AC714  80 6D F8 98 */	lwz r3, __OSCurrHeap@sda21(r13)
/* 803AF918 003AC718  7F A4 EB 78 */	mr r4, r29
/* 803AF91C 003AC71C  48 02 3D ED */	bl func_803D3708
/* 803AF920 003AC720  80 01 00 24 */	lwz r0, 0x24(r1)
/* 803AF924 003AC724  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 803AF928 003AC728  83 C1 00 18 */	lwz r30, 0x18(r1)
/* 803AF92C 003AC72C  83 A1 00 14 */	lwz r29, 0x14(r1)
/* 803AF930 003AC730  7C 08 03 A6 */	mtlr r0
/* 803AF934 003AC734  38 21 00 20 */	addi r1, r1, 0x20
/* 803AF938 003AC738  4E 80 00 20 */	blr 
